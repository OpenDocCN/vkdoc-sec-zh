# 七、报告

在这里挑选一个有意义的陈词滥调。例如，橡胶与路面的交界处。报道是一切真正发生的地方。你可以花几天或几周的时间做实际的测试，但是如果你不报告，那还有什么意义呢？当你试图引起某人的注意，而这个人可能真的能够解决你发现的问题时，你需要做一个专业的陈述，并且能够以非常清晰的方式解释这些问题。以客观的方式传达您的发现非常重要，这样不了解信息安全的人也能理解您所说的内容。他们还需要明确你认为根据你的发现应该做什么。指出如何解决问题是你真正能增加价值的地方。如果你只是把一份报告扔在某人的桌子上，解释他们有很多问题，然后离开，你对他们没有多大帮助，尽管他们会有一份报告，可以用来反对审计。不过，最终，仅仅说他们做了渗透测试以获得审计勾号是没有帮助的。在六个月或一年后，当他们为他们的审计需求再次运行测试时，结果仍然会在那里，一个体面的审计员会注意到这一点。

当然，如果你已经在这个行业工作了一段时间，你会看到一些报告，这些报告提供了很多关于测试人员如何能够访问网络中各种资源的细节。最后，这基本上是徒劳的，因为一旦你进入系统，系统之间可能存在信任问题，这可能会给攻击者带来额外的访问权限。从一个系统跳到另一个系统并不一定意味着存在任何额外的漏洞。这可能只是一个窃取凭证的案例。凭证盗窃是漏洞所在，而不一定是那些相同的凭证可被用来获得对网络核心内的各种服务器的访问的事实。通常，这是按照设计的，因为许多企业组织在其整个基础架构中使用单一用户帐户。在使用 Microsoft Windows 及其活动目录的企业中尤其如此。Active Directory 存储用户凭据，所有需要身份验证的系统和资源通常会对照 Active Directory 进行身份验证。如果您在这样的环境中窃取了用户名和密码，您就可以访问该用户有权访问的任何系统。

最后，重要的是非常清楚具体的漏洞以及如何纠正它们。提供一份华而不实的报告，显示你能够访问几十个系统，这看起来很酷，但是它掩盖了测试过程中真正发生的事情，即使看起来测试人员真的知道他们在做什么。不一定是这样。所以，帮你自己一个忙，确保尽可能包含补救建议。这是能给你的雇主或客户提供最大价值的东西，也是能让他们要求你回报的东西。

多年来，我已经确定了一种单一的报告格式，这种格式非常适用于网络测试、远程测试、基于主机的测试和 Web 应用程序测试。您将要进行的每一种渗透测试或安全评估都归结为一组需要描述的漏洞。每个描述都需要包括您发现漏洞的证据，以及按危险程度对漏洞进行分类的方法。最后，你需要提供补救建议。报告中的其他内容只是设置了肉，这是调查结果。然而，环绕也同样重要。首先，你需要一份执行摘要，因为写检查的人通常不会阅读调查结果，其中包括许多他们没有时间深入研究的技术细节。除此之外，描述你的方法表明你已经考虑过如何工作。它展示了一种科学的方法，意味着你是有条不紊的，并且以一种可以被理解的方式进行测试，并且在需要的时候重复。这意味着，在理想情况下，你不只是向目标扔很多东西，而不知道你在做什么。在某种程度上，这个方法会提供你的凭证。

报告的主要内容通常是调查结果，您需要将调查结果详细化，以便技术人员能够了解已发现的漏洞以及攻击者利用这些漏洞所带来的业务后果。大多数情况下，他们需要知道他们需要做什么来解决问题。最后，你应该在报告的结尾重申测试的重要发现。你也可以包括一些附录作为辅助材料，这些材料太长了，如果不把它们放入报告中，每个人都会被几页输出或其他数据弄糊涂。

接下来的部分将详细说明您应该在这些报告部分中输入什么，以便您最终得到一份易于理解的实质性报告，并提供一份路线图，说明您已经完成了什么以及他们应该为此做些什么。

## 行动纲要

从某种意义上说，这可能是你报告中最重要的部分，因为这部分向管理层展示了你提供了服务，而且你确实有了一些发现。他们不会自己去读这些发现。因此，您需要在这里提供一个非常简短的总结。报告最好以一两句话开始，解释你做了什么，为什么这么做。优达因推进系统公司于 2016 年 3 月 21 日与 Wubble 咨询公司签约，对内部基础设施系统进行安全评估。这是一个非常简洁的开始方式。你可以用另一句话来跟进，提供有关合约范围的更多细节。你可以再次非常简洁地表明`—``—`你在那里对所有系统进行安全测试，除了被认为超出范围的任何东西。这是你回到合同的地方。您所签订的合同或协议需要非常具体地说明合约的范围，因此您需要明确是否有您没有通过协议测试的元素。执行管理层可能会有这样的印象，即一切都经过了测试，尽管直线管理层可能已经向您表明，您不应该测试脆弱的基础设施。如果测试是零零碎碎地进行的，也就是说你选择了一个有代表性的样本，指出这一点，并在附录中包括系统。参考这里的附录。

这里有一点很重要。确保突出您发现良好网络安全实践范例的领域。例如，这可能是保持最新的最强加密。如果你发现某件事做得很好，指出来。这可能会产生政治分歧，因为这让你可能合作过的技术团队在他们的管理层看来很好。这也证明了你不仅仅是为了摧毁他们。

通常，在执行摘要中，我会特别指出，我们受到项目条款的时间限制，报告中的调查结果是在该时间段内发现的。它不应该被解释为一个详尽的列表。拥有额外时间和资源的人可能会发现更多漏洞。这让他们明白，如果他们同意报告中的发现，并不意味着他们完全安全。如果它们后来被破坏了，它也在一定程度上保护了你。你已经表明你已经做了你能做的事情，但是这份报告并不能保证这就是他们易受攻击的地方。

一旦您指出了您执行的测试，您就可以指出您遵循的一般方法。例如，您可以表明您遵循了开放源代码安全测试方法(OSSTM ),或者遵循了您自己的测试方法，该方法关注由开放 Web 应用程序安全项目(OWASP)确定的前 20 个常见漏洞。

根据您执行的测试，在此提供特定高风险漏洞的列表或漏洞类别的列表。这可能是一个项目列表，你可以提供一两句话，以非常清晰的方式解释每一项。请记住，报告这一部分的读者可能没有太多的技术经验或理解能力。使用简单明了的英语，阐明对公司及其数据或人力资源的潜在影响。这部分是必不可少的。仅仅说有一些输入验证问题是没有多大帮助的。从影响的角度来看，清楚地表明其中一些问题可能会导致数据损坏或泄漏更容易理解。管理层会理解那里的影响，尤其是如果你弄清楚你指的是哪些数据。这是库存数据、用户名数据还是公司拥有的其他存储？

你也可以选择在这里加入一些表格，对你的发现进行分类。一些高风险调查结果，一些中等风险调查结果，等等。如果你愿意，你也可以进一步分解它。Windows 基础架构中的一些调查结果，台式机中的一些调查结果，设备领域中的一些调查结果，其中可能包括没有面向用户的界面或操作系统的打印机或其他设备。除了表格之外，您还可以包括图表，因为这些图表有助于非常清楚地了解到底发现了什么以及发现的比例。一个红色的大饼条表示高风险项目，通常会引起某人的注意。

理想情况下，你报告的这一部分应该尽可能接近一页纸。考虑到你的听众和你想给人留下的印象，你可能会倾向于在这里提供大量的信息。战胜这种冲动。请记住，只阅读执行摘要的人非常忙。当你进入多个页面时，你的目光会停留在细节上，你会失去它们。你需要非常中肯。如果你能把它控制在一页之内，你就最有可能确保他们会阅读整个摘要。如果你有图形和图表，你可以进入第二页，但任何超出这一页的内容，你将会失去一些人。简直就是大忙人看报告的天性。开门见山，确保包含一些接近行动号召的内容。他们需要为此做些什么？让他们知道能做什么。

从文档格式的角度来看，您可以选择将目录放在执行摘要的后面，这样阅读文档的人就不必为了找到重要部分而跳过它。实际上，您可以选择将摘要导出为独立的文档。这可能对需要向客户或供应商提供某些东西的公司有用，因为他们不想提供报告中的所有细节。除了目录之外，您可能还希望提供图表目录，因为您可能会将屏幕截图作为调查结果的一部分，图表目录是一个很好的参考。

## 方法学

你不需要在这里详细说明。如果你有一个详细的方法，它可能已经作为合同期的一部分提供给你的客户，或者你可以作为附录或额外的文件提供，以便他们知道。如果您有自己的方法，提供一个高层次的概述可能比提供一些对您或您的组织来说独特的东西更好。有时这些东西可以被用作区别特征，尽管在大多数情况下，组织和测试人员之间的一般方法是相同的。不同之处在于每个测试人员拥有的技能，他们在应用方法时的创造力，以及他们感觉哪里有值得深入挖掘的东西的能力。

你的方法部分应该包括你的一般方法和你所做的一些重点。包括您用作指导的任何测试方法的参考。这可能包括美国国家标准与技术研究所(NIST)的一些文档，以及任何可用的开放测试方法。最后，你可以列出你使用的所有工具。包括版本号，这样您就可以证明您使用的至少是合理的最新版本。如果你使用任何定制工具，你可以在你的方法论中提到它们。这也是一个可以让你脱颖而出的地方。在测试过程中，优秀的测试人员最终会编写一些他们自己的工具，或者为特定的目的开发脚本或程序。毕竟，有些任务确实需要编程方法。举个例子，如果你试图使用一个使用二进制协议的服务器，你将不能在 telnet 或 netcat 会话中输入它。您需要编写一些东西来与能够传输特定二进制编码的服务器进行交互。

你的方法页面很可能就是你会反复使用的页面。这可以是您的样板模板的一部分，当新版本的软件出现时，或者如果您在一个项目中使用了一些不同的工具，您可以更新该模板。随着实践的发展，你也应该更新你的一般方法。

## 调查的结果

调查结果将是你报告的主要部分，因为这是最重要的方面，将为你客户的技术人员提供最大的价值。虽然前两个部分主要是叙述性的，但在这里您可以考虑将其分解，以便更容易进行可视化解析。这样，读者可以直接跳到他们最感兴趣的部分。你可以选择用一种对你有意义的方式来展示你的信息。我提供了下面的演示风格，这种风格已经在我身上运行了好几年了。每个发现都按照这种格式得到自己的块。一旦我有了所有的发现，我就把它们分成高、中、低风险的发现。然后，我有一个信息表，列出了应该提及但不够有趣的项目，以对完整的发现块进行评级。从文档格式化的角度来看，您可以为每一个关键点设置小节标题。这意味着每个部分在目录中都有一个条目，使它们更容易快速找到，尤其是在报告很长的情况下。

用于关键程度的部分有高、中和低，但这实际上是两个组件的合并，只是为了更容易报告。在确定一个发现的关键程度时，通常会结合使用影响和概率。调查结果的影响是衡量在漏洞被触发或利用时组织可能会发生什么的指标。如果该发现可能导致数据丢失或损坏，则它的影响程度可能会很高。发现服务器名称和版本的信息泄漏可能影响不大。如果有问题的服务器在它运行的版本中有漏洞，那应该是它自己的发现和它自己的影响，这将取决于确切的漏洞是什么。

在这种情况下，我们使用文字而不是数字来评估风险。这通常被称为定性风险评估，因为没有与这些发现相关的硬性数字。这些发现的确切数字可能很难获得，尤其是如果你是一名承包商。如果你是一名员工，并能提供这些调查结果中的一项将导致公司停工或损失的确切数字，你可以用它来证实你所说的话。不过，作为外部人士，你必须做出最佳评估，有时还要与你在客户处的联系人一起进行评估，他们可能会告诉你，一项调查结果的影响真的很小，因为他们更清楚公司面临的风险。

影响的另一个因素是概率。这个真的是最难确定的。计算概率很大程度上依赖于经验。不过，有一些简单的方法可以解决这个问题。如前所述，在提供服务器信息的情况下，我们认为这种情况发生的概率非常高。服务器信息很容易获得。如果有一个 Web 服务器被配置为提供版本号，那么获取该信息是很简单的事情`—`几乎不需要任何技能。如果它出现在网页上的错误消息中，或者有时出现在某些页面的页脚，那么它根本不需要任何技巧。只有阅读的能力。

比如说，在对世界开放的电子邮件服务器存在已知漏洞的情况下，或者存在概念验证利用，或者更糟的是，存在实时利用，这种可能性再次很高。只需要有人下载漏洞并运行它，你就妥协了。在某些情况下，编译或运行漏洞利用代码可能需要一些技巧，但是由于漏洞利用是免费提供的，并且容易获得，因此这种可能性很高。

其他发现可能更难确定其可能性。例如，如果一个 Web 服务器面临拒绝服务攻击，这种可能性有多大？有时，确定概率依赖于可能存在的其他补救措施，因此如果有其他考虑因素，您可以降低概率。例如，您可以为漏洞扫描程序提供凭证，这样它就可以在系统上进行本地认证扫描。也许扫描程序发现了一个本地漏洞，这意味着你必须登录系统才能利用它。这可能是一个权限提升漏洞，普通用户可以获得超级用户权限，因此扫描程序将其标记为严重漏洞。您知道，要利用此漏洞，您必须是经过身份验证的用户，而且您可能还知道，您已经实现了双因素身份验证，并且只有极少数系统管理员拥有此系统的帐户。这肯定是一个需要解决的问题，但是双因素身份验证和有限的帐户数量使得它被利用的可能性大大降低。

一旦我完成了对可能性和影响的评估，我就将它们合并成一个单一的严重等级。做这件事没有单一的方法。当我决定一件事是否分裂时，有不同的影响和概率等级，我倾向于选择影响。如果我有一个影响大、可能性中等的问题，我可能会将其归类为高优先级项目。高/低或低/高的发现通常是中等发现。

在进入所有细节之前，用一个简短的标题来确定问题是有帮助的。如果您用标题格式化文档，您可以用数字和名称来标识每个查找结果，这样它就可以清楚地显示在目录中。通常，对于编号，我会使用一个字母和一个数字。H1 将是第一个高优先级的调查结果，M2 是第二个中等优先级的调查结果，依此类推。一旦你提供了一个名字并计算出它的优先级，你就可以开始填写所有的细节了。

### 发现

发现是你可以准确描述你发现了什么。像往常一样，这里要简洁明了。这不是一个长篇大论的地方。准确解释漏洞是什么以及它为什么重要。这应该包括如果漏洞被触发会发生什么，以及某种解释，说明您为什么对其进行评级。这里不用担心提供证明。只要清楚地解释问题是什么，为什么它是一个问题。

### 建议

这是你提供大量价值的地方。确保提供详细的解释，说明他们需要做些什么来解决问题。在某些情况下，你可能只能提供一般性的建议。如果这是一个 Web 应用程序漏洞，这将是典型的。但是，如果是需要更改配置的问题，请提供需要更改的文件和设置的详细信息。

### 证据

在本节中，提供证明漏洞真实存在的详细信息。您可能有数据包捕获的一部分、一组报头或一些其他证据。这里使用屏幕截图真的很有帮助。视觉证据非常有助于证明你确实看到了你所说的东西。如果你在这里演示了你所做的，这也有助于客户复制它。如果你真的雄心勃勃，你可以录制一些截屏视频来展示你到底做了什么以及结果是什么。你可以将它们保存到 Google Drive 文件夹中，并与你的客户分享这个文件夹，作为一种发送方式。视频不仅仅是截屏，但大多数时候截屏就够了。毕竟，他们不一定需要看到你到底做了什么。他们只是需要一些证据来证明你确实发现了什么。总是提供叙述来解释屏幕截图。不要让屏幕截图为你说话。解释他们在看什么。这里需要叙述有很多原因。证明你知道你做了什么只是其中一个原因。教育你的客户是第二个原因。记住，你增加的价值越多，你就越有可能被收回。

### 参考

在参考资料部分，您可以提供一些解释该发现的附加资源。这可能包括一个通用漏洞和利用(CVE)链接，提供与供应商无关的漏洞信息。您可以包含一些解释一类攻击的链接，例如与输入验证相关的链接。如果您已经提供了关于如何修复漏洞的具体说明，那么在这里提供更多详细信息的链接会很有用。大多数情况下，这只是一个支持你所说的实质性信息的地方。同样，不要让这里成为你让他们去寻找答案的地方。所有相关的信息都应该在你的报告里。这只是为了支持。

### 报告的

您可能有信息项。这些可能是各种各样的发现，甚至没有真正上升到低优先级发现的水平。例如，它可能是您在测试过程中注意到但无法复制的东西。既然你已经找到了一次，这很可能是一个问题。除了信息项之外，您还可以包括一组一般性建议。如果你发现了一些主题，这可能是特别真实的。这里提到健壮的更新策略对整体安全状况的重要性可能是有用的。任何你能想到的与你的测试相关的一般性建议都可以放在这里。

## 摘要

该报告是您将在项目过程中执行的最后一项任务，但可能是最重要的任务。要记住的一件事是，在你离开公司很久以后，你的报告仍然存在。它应该反映你的专业精神和对细节的关注。这是一份组织中任何人都可以查看的报告，也可能与您客户的合作伙伴和客户共享。你希望你的工作能给你带来好的影响。

你可以用任何对你有意义的方式提供你的发现。根据多年来与各种有自己偏好的客户打交道的经验，我最终采用的格式分为以下几类:

*   行动纲要
*   方法学
*   调查的结果
*   结论

《执行摘要》应简明扼要，提供有关项目的细节以及调查结果的简要概述。此外，请务必在此指出，您受到了时间的限制，因为所有项目都是无期限的。拥有更多时间、资源和奉献精神的人可能会发现其他漏洞。

方法部分展示了你在测试中不仅仅是随意的，而是遵循一个计划。你不需要在这里提供一个测试计划，只需要一个关于测试的基本原理以及你使用的工具列表，包括版本。

调查结果应该是最长的部分，并且应该包括优先顺序，从最高优先级的项目开始，以最低优先级的项目结束。在每项发现中，请确保包括对您发现的内容及其重要性的描述、如何纠正问题的建议，以及您确实发现了该问题的证据。除此之外，你还可以为他们提供更多的参考资料，以防他们想做更多的阅读。

总结部分是你总结一切的地方。无论是在这里还是在执行摘要中，一定要指出你发现的任何做得好的地方。这对你和客户的关系非常有帮助，尽管这看起来很愚蠢，因为你是被雇来找问题的。对他们做得好的方面给予表扬将有助于改善你们的关系，并表明你不仅仅是要摧毁他们，而是要真正帮助他们改善他们的整体安全状况。突出他们擅长的领域可以帮助他们从这些领域学习，然后专注于他们真正需要帮助的其他领域。